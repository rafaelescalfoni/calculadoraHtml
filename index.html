<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="./bootstrap/css/bootstrap.css" />
		<link rel="stylesheet" type="text/css" href="./css/estilo.css" />
		<script type="text/javascript" src="./js/jquery.js"></script>
		<script type="text/javascript" src="./bootstrap/js/bootstrap.js"></script>
		<script type="text/javascript">
			$(function(){
				var operando = 0,
					operacao = "";
				const TAM_MAX = 9;

				$("button").click(function(){
					if($(this).hasClass("tecla")){ 
						var valorAnterior = $("#display").text();
						if(valorAnterior.length == TAM_MAX) {
							chamarMensagem("Tamanho m√°ximo atingido!");
							return 0;
						} 
						if (valorAnterior == 0) {
							$("#display").text($(this).val());
						} else{ 
							$("#display").text(valorAnterior + $(this).val());
						}
					}
				});

				$("#teclaSoma").click(function(){
					operando = parseInt($("#display").text());
					operacao = "soma";
					console.log("valor de operando = " + operando);
					limparDisplay();
				});

				$("#teclaIgual").click(function() {
					mostrarResultado();
				});
				$("#teclaLimpar").click(function(){
					limparDisplay();
				})
			});

			function teclar(botao) {
				
			}
			function apagaMensagem(objHtml) {
				console.log("clicou no span xis");
				limparDisplay();
				$(objHtml).parent().remove();
				$(".btn").removeAttr("disabled");
			}

			function chamarMensagem(txt) {
				$(".panel-heading")
					.append($("<div />")
						.addClass("alert alert-danger")
						.attr({ "id":"boxMsg"}) 
						.text(txt)
						.prepend($("<button />")
							.attr({"type": "button", "id":"xis", "onClick": "apagaMensagem(this)"}) 
							.addClass("close")
							.append($("<span />")
								.html("&nbsp;&times;"))
							)
					);
				$(".btn").attr("disabled", "disabled");
			}

			function mostrarResultado() {
				var operando2 = parseInt($("#display").text());
				if(operacao == "soma") {
					$("#display").text(operando + operando2);	
				}
			}

			function limparDisplay() {
				operando = 0;
				$("#display").text("0")	;
			}
		</script>
	</head>
	<body>

		<div class="panel panel-default col-md-4 col-md-offset-4" style="padding-left:0; padding-right:0">
  			<div class="panel-heading" >
    			<h3 id="display" class="panel-title">0</h3>
  			</div>
			<div class="panel-body">
				<div class="btn-group comandos" >
					<button id="teclaLimpar" class="btn btn-primary" >
						Limpar
					</button>
					<button id="teclaIgual" class="btn btn-primary">
						=
					</button>
				</div>
				<div class="btn-group" data-toggle="buttons">
					<button id="tecla7" class="btn btn-primary tecla" value="7">
						7
					</button>
					<button id="tecla8" class="btn btn-primary tecla" value="8">
						8
					</button>
					<button id="tecla9" class="btn btn-primary tecla" value="9">
						9
					</button>
					<button id="teclaDiv" class="btn btn-primary teclaOperacao">
						/
					</button>
				</div>
				<div class="btn-group" data-toggle="buttons">
					<button id="tecla4" class="btn btn-primary tecla" value="4">
						4
					</button>
					<button id="tecla5" class="btn btn-primary tecla" value="5">
						5
					</button>
					<button id="tecla6" class="btn btn-primary tecla" value="6">
						6
					</button>
					<button id="teclaMult" class="btn btn-primary teclaOperacao">
						X
					</button>
				</div>
				<div class="btn-group" data-toggle="buttons">
					<button id="tecla1" class="btn btn-primary tecla" value="1">
						1
					</button>
					<button id="tecla2" class="btn btn-primary tecla" value="2">
						2
					</button>
					<button id="tecla3" class="btn btn-primary tecla" value="3">
						3
					</button>
					<button id="teclaSub" class="btn btn-primary teclaOperacao">
						-
					</button>
				</div>
				<div class="btn-group" data-toggle="buttons">
					<button id="teclaOculta" class="btn btn-primary tecla"></button>
					<button id="tecla0" class="btn btn-primary tecla" value="0">
						0
					</button>
					<button id="teclaVirgula" class="btn btn-primary tecla">
						,
					</button>
					<button id="teclaSoma" class="btn btn-primary teclaOperacao">
						+
					</button>
					
				</div>
			</div>
		</div>
	</body>
</html>